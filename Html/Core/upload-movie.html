<!doctype html>
<html>

<head>

    <head>
        <!--setting the base reference-->
        <base href="/">
        <script type="module">
            import { searchMovie } from "/JsSrc/SearchMovies.js";
            window.searchMovie = searchMovie;
        </script>
        <script type="module" src="JsSrc/Components/NavBar/NavBar.js"></script>
        <script type="module" src="JsSrc/Auth/SignedIn.js"></script>
        <link rel="stylesheet" href="JsSrc/Components/NavBar/nav-bar.css">
        <link rel="stylesheet" href="Html/Core/upload-movie.css">
        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script type="module">
            import { uploadMovieForm } from "/JsSrc/UploadMovieForm.js";
            window.uploadMovieForm = uploadMovieForm;
        </script>
    </head>

<body>
    <nav-bar></nav-bar>
    <center>
        <h1>Upload Movie</h1>
        <div id="movie-upload">
            <div id="movie-core">
                <form id="upload-movie-form" action="javascript:void(0);" enctype="multipart/form-data">
                    <h3>Movie Essentials</h3>
                    <input name="name" placeholder="Title" type="text" required="true">
                    <br>
                    <br>
                    <div id="image-form">
                        <div>
                            <center>
                                <div id="img-preview"></div>
                            </center>
                            <input type="file" accept="image/*" id="choose-file" name="image" required="true">
                            <label for="choose-file">Choose Image</label>
                        </div>
                    </div>
                    <br>
                    <div>
                        <textarea id="textarea" placeholder="Summary of the movie..." name="summary"
                            required="true"></textarea>
                    </div>
                    <br>
            </div>
            <div id="movie-details">
                <h3>Movie Details</h3>
                <div class="input-element">
                    <input name="movieId" placeholder="Movie Id" type="text" required="true">
                </div>
                <div class="input-element">
                    <input name="director" placeholder="Director" type="text" required="true">
                </div>
                <div class="input-element">
                    <input name="studio" placeholder="Production Studio" type="text" required="true">
                </div>
                <div>
                    <input name="lengthHours" placeholder="Hours" type="number" min="0" required="true">
                    <input name="lengthMinutes" placeholder="Minutes" type="number" min="0" max="59" required="true">
                </div>
                <div class="input-element">
                    <input name="rating" placeholder="Rating" type="number" step="0.1" min="0" max="10" required="true">
                </div>
                <label for="genre" class="visually-hidden">Label Text</label>
                <select id="genre" name="genre">
                    <option value="action">Action</option>
                    <option value="romance">Romance</option>
                    <option value="thriller">Thriller</option>
                    <option value="comedy">Comedy</option>
                    <option value="sci-fi">Sci-fi</option>
                    <option value="horror">Horror</option>
                    <option value="drama">Drama</option>
                </select>
                <label for="rated" class="visually-hidden">Label Text</label>
                <select id="rated" name="rated">
                    <option value="G">G</option>
                    <option value="PG">PG</option>
                    <option value="PG-13">PG-13</option>
                    <option value="R">R</option>
                </select>
            </div>
            <button onclick="uploadMovieForm()" id="submit" type="submit">Upload Movie</button>
            </form>
        </div>
    </center>

    <script type="text/javascript">
        const chooseFile = document.getElementById("choose-file");
        const imgPreview = document.getElementById("img-preview");

        chooseFile.addEventListener("change", function () {
            getImgData();
        });

        function getImgData() {
            const files = chooseFile.files[0];
            if (files) {
                const fileReader = new FileReader();
                fileReader.readAsDataURL(files);
                fileReader.addEventListener("load", function () {
                    imgPreview.style.display = "block";
                    imgPreview.innerHTML = '<img src="' + this.result + '" />';
                });
            }
        }
    </script>

</body>

</html>